<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<head>
		<title>心時代AI檢測</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
		<link rel="stylesheet" href="assets/css/new.css" />
		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
		<link href='https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css' rel='stylesheet'></link>
		<!--以下學姊網頁
		<link rel="stylesheet" href="/vendor/bootstrap-4.5.0-dist/css/bootstrap.min.css" crossorigin="anonymous">
    	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" crossorigin="anonymous">
    	<script src="/vendor/bootstrap-4.5.0-dist/js/jquery-3.3.1.min.js" crossorigin="anonymous"></script>
    	<script src="/vendor/bootstrap-4.5.0-dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
		/-->

	</head>
	<body class="is-preload">

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
					<header id="header">
						<div class="logo">
							<span><img src="images/icon.png" width="80" alt="" /></span>
						</div>
						<div class="content">
							<div class="inner">
								<h1>心時代-先天性心臟病AI檢測</h1>
								<h3>快速簡潔、完全免費、隨傳即測</h3>
							</div>
						</div>
						<nav>
							<ul>
								<li><a href="#intro">疾病介紹</a></li>
								<li><a href="#work">功能簡介</a></li>
								<li><a href="#about">開始預測</a></li>
								<li><a href="#contact">關於我們</a></li>
								<!--<li><a href="#elements">Elements</a></li>-->
							</ul>
						</nav>
					</header>

				<!-- Main -->
					<div id="main">

						<!-- 疾病介紹 -->
							<article id="intro">
								<h2 class="major">疾病介紹</h2>
								<span class="image main"><img src="images/pic01.jpg" alt="" /></span>
								<!-- <p> By the way, check out my <a href="#work">awesome work</a>.</p>  -->
								<span style="text-decoration:underline;font-size:x-large;">心房室中隔缺損(Atrial Septal Defect,ASD)</span>
								<p>心房中隔缺損指人體心臟中隔開左心房與右心房的中隔產生了缺口，導致兩房的血液相互流通，引發患者容易感到疲倦、運動呼吸困難等問題。該症狀在幼童時期表現較不明顯，但隨者患者年紀增加，發生症狀的機率也會愈大，進行手術時心律不整的機率也會跟著提高，因此若能透過檢測盡早發現並進行修補，將能有效提升治療的效果。</p>
								<hr/>
								<span class="image main"><img src="images/pic02.jpg" alt="" /></span>
								<span style="text-decoration:underline;font-size:x-large;">心室中隔缺損(Ventricular Septal Defect,VSD)</span>
								<p>心室中隔缺損指人體心臟中隔開左心室與右心室的中隔產生缺口，導致兩室的血液相互流通，但事實上左心室的充氧血理應注入主動脈，而不是經由右心室流向肺部，一旦發現有心室中膈缺損雜音，應交由專科醫師診斷，以決定未來持續觀察或藥物等治療。此外，VSD是最常見的類型，僅有VSD的症狀佔約所有先天性心臟病之30%，若納入混合其他類型如法洛四合症、單一心室等先天性心臟病則有超過50%。</p>
							</article>
						<!-- /疾病介紹 -->

						<!-- 功能簡介 -->
							<article id="work">
								<h2 class="major">功能簡介</h2>
								<!--<span class="image main"><img src="images/pic02.jpg" alt="" /></span>-->
								<p><b>-操作範例-</b></p>
								<video src="PowerPoint 投影片放映 - [沙漏網路] 2021-02-20 21-30-36.mp4" controls width="550"></video>
								<hr>
								<p><b>-疾病介紹-</b><br>透過疾病介紹的頁面，可以了解到心室中膈缺損(VSD)和心房中膈缺損(ASD)的一些基本知識，供使用者查看。</p>
								<span class="image main"><img src="images/疾病介紹圖片.png" alt="" /></span>
								<p><b>-開始預測-</b><br>將心臟超音波圖片上傳至此頁面，按下開始預測，即能快速的預測出結果。<br><font color="orange">!!注意!!</font> 本網站只提供VSDType1、VSDType2、VSDType4和ASDType2的預測。<br><font color="orange">!!注意!!</font> 上傳時請注意心臟超音波圖須為主動脈根部短軸切面、二尖瓣水平切面、胸骨旁左室短軸切面、心尖四房室/五房室、劍突兩房短軸切面和劍突兩房長軸切面才可順利判讀。</br></p>
							    <span class="image main"><img src="images/開始預測圖片.png" alt="" /></span>
								<p><b>-關於我們-</b><br>在此頁面可以看到一些創作者的簡介，也可以在這找到聯絡我們的相關資訊。</p>
							    <span class="image main"><img src="images/關於我們圖片.png" alt="" /></span>
							</article>
						<!-- /功能簡介 -->

						<!-- 預測 -->
						
							<!--h2 class="major">run python test</h2-->


						
							<article id="about">
								<h2 class="major">開始預測</h2>
								<!--學姊網頁-->

								<div class="custom-file">
									<!--input type="file" class="custom-file-input" id="123" multiple="multiple" accept="image/gif, image/jpg, image/png">
									<label class="custom-file-label" for="customFile"></label-->
									
									<label class="myButton" style="float:left;height: 30px;margin-right: 30px;" >
									<input id="upload-input" style="display:none;" type="file" multiple="multiple" accept="image/*">
									<i class="fa fa-photo" style="padding-top:8px;"></i> 上傳圖片
									</label>

									<label class="myButton" style="float:left;height: 30px;margin-right: 30px;" >
										<input onclick="test()" id="upload-input-video" style="display:none;" type="file" multiple="multiple" accept="video/*">
										<i class="fas fa-video" style="padding-top:8px;"></i> 上傳影片
									</label>

									<button class="myButton" style="height: 30px;width: 75px;">清空表格</button>
									<label class="custom-file-label" for="customFile"></label-->
										

									
									<table class="table table-dark table-striped">
										<tr>
											<th>圖片</th>
											<th>參數</th>
										</tr>
										<tbody id="upload">
										</tbody>
								 	</table>
								</div>
								<div id="test"></div>
								

								<!--/學姊網頁-->
								
								<!--學姊預測-->
								<script src="https://unpkg.com/@tensorflow/tfjs"></script>
								<script src="https://unpkg.com/@tensorflow/tfjs-automl"></script>
								<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

								<script>

								//以下影片預測
								
								num = 1

								$('#upload-input-video').change(async function test(e){

									$.ajax({url:"passto.php", success:function(result){
									//$("div").text(result);
									}})

									// $.ajax({url:"passback.php", success:function(result){
									// 	$("#test").text(result);
									// }})
									

									num = num+1
									var files = $("#upload-input-video")[0].files;
									for (var i = 0; i < files.length; i++)
										{
										var url = window.URL.createObjectURL(eval(files[i]));
										console.log(files[0]);
										var mm=3.14159
										console.log(document.getElementById(mm))
										$("#upload").append(` <tr><td width="30%"><video autoplay muted loop id='salad${files[0].name+i+num}' width="250" src=${url}></td><td><img id='salad${files[0].name+i+num}' width="250" src="images\\cut.png"></td>`);
											setTimeout(myTimer, 900);
											function myTimer() {
												$("#upload").append('<tr><td colspan="2" align="center">結果:"VSDTYPE2"<br> 信心水準:81%</td></tr>');
											}
											
											
										}

										
											
									

									
								});



								//以下圖片預測
								
								$('#upload-input').change(async function(e){
										num = num+1
										var files = $("#upload-input")[0].files;
										// var num =num+1;
										for (var i = 0; i < files.length; i++)
										{
										var url = window.URL.createObjectURL(eval(files[i]));
										console.log(files[0]);
										// $("#upload").attr('src', url);
										var mm=3.14159
										console.log(document.getElementById(mm))
										$("#upload").append(` <tr><td width="30%"><img id='salad${files[0].name+i+num}' width="250" src=${url}></td><td><canvas id='sal${files[0].name+i+num}' height="177" width="250"></canvas></td></tr><tr id='sall${files[0].name+i+num}'></tr>`);
										}
										var str = '';
										var predictValue = new Array();
										var model = await tf.automl.loadObjectDetection('model.json');
										var options = {score: 0.5, iou: 0.5, topk: 20};
										var time=0;
										for (var i = 0; i < files.length; i++)
										{
										
										var img = document.getElementById(`salad${files[0].name+i+num}`);
										var predictions = await model.detect(img, options);

										console.log(predictions);
										if(predictions.length == 0){
											console.log('not found!!');
											str = 'not found!!\n';
											document.getElementById(`sall${files[0].name+i+num}`).innerHTML='<td colspan="2" align="center">not found!!\n<td>';
											var ctx = document.getElementById(`sal${files[0].name+i+num}`).getContext('2d');
											ctx.drawImage(img,0,0,(img.width),(img.height)); 
											ctx.lineWidth = 2;
											ctx.strokeStyle = "##FFFF37"
											ctx.strokeRect(x,y,w,h);
										}else{
											var x = JSON.stringify(predictions[0]["box"]["left"]);
											var y = JSON.stringify(predictions[0]["box"]["top"]);
											var w = JSON.stringify(predictions[0]["box"]["width"]);
											var h = JSON.stringify(predictions[0]["box"]["height"]);
											var myJSON2 = JSON.stringify(predictions[0]["label"]);
											var myJSON3 = JSON.stringify(predictions[0]["score"]);
											var x1 = JSON.stringify(predictions[1]["box"]["left"]);
											var y1 = JSON.stringify(predictions[1]["box"]["top"]);
											var w1 = JSON.stringify(predictions[1]["box"]["width"]);
											var h1 = JSON.stringify(predictions[1]["box"]["height"]);
											var myJSON21 = JSON.stringify(predictions[1]["label"]);
											var myJSON31 = JSON.stringify(predictions[1]["score"]);
											
											if((w1-x1)<(w-x)){
												document.getElementById(`sall${files[0].name+i+num}`).innerHTML =`<td colspan="2" align='center'>結果:`+myJSON21+`<br> 信心水準:`+(100*myJSON31).toFixed(2).toLocaleString()+`%</td>`;
												var ctx = document.getElementById(`sal${files[0].name+i+num}`).getContext('2d');
												ctx.width=img.width;
												ctx.height=img.height;

												ctx.drawImage(img,0,0,(img.width),(img.height)); 
												ctx.lineWidth = 2;
												ctx.strokeStyle = "#FF2626"
												ctx.strokeRect(x1,y1,w1,h1);
												ctx.globalAlpha = 0.5;
												ctx.beginPath();
												ctx.rect(x1, y1, w1, h1);
												ctx.fillStyle = "#FF2626";
												ctx.fill();
											}else{
												document.getElementById(`sall${files[0].name+i+num}`).innerHTML =`<td colspan="2" align='center'>結果:`+myJSON2+`<br> 信心水準:`+(100*myJSON3).toFixed(2).toLocaleString()+`%</td>`;
												var ctx = document.getElementById(`sal${files[0].name+i+num}`).getContext('2d');
												ctx.width=img.width;
												ctx.height=img.height;

												ctx.drawImage(img,0,0,(img.width),(img.height)); 
												ctx.lineWidth = 2;
												ctx.strokeStyle = "#FF2626"
												ctx.strokeRect(x,y,w,h);
												ctx.globalAlpha = 0.5;
												ctx.beginPath();
												ctx.rect(x, y, w, h);
												ctx.fillStyle = "#FF2626";
												ctx.fill();
											}
											
											//框框


						
										}

										predictValue.push(str);
										
										}
										
								});
								
								

								$(document).ready(function(){
									$("button").click(function(){
										$("#upload").empty();
									});
								});
								// php -S localhost:8000
									</script> 
								 <!--/學姊預測-->
							</article>
						<!-- /預測 -->
							

						<!-- 關於我們 -->
						<article id="contact">
							<h2 class="major">關於我們</h2>
							<h3 class="intro">簡介</h3>
							<p>本次研究關於幼兒心臟超音波圖像的判別，主要研究Normal以及ASD、VSD兩類病症的判斷。</p>
							<!-- <form method="post" action="#">
								<div class="fields">
									<div class="field half">
										<h3 class="team">醫師專家團隊</h3>
										<p>臺北醫學大學 謝凱生醫生</br>高雄榮民總醫院 翁根本醫生</p>
										<h3 class="team">指導老師</h3>
										<p>長庚大學 陳宜慧教授</br>正修科大 陳世興教授</p>
									</div>
									<div class="field half">
										<h3 class="team">小組成員</h3>
										<p>長庚大學資管系 陳畇巧</br>長庚大學資管系 李玟儒</br>長庚大學資管系 張如億</br>長庚大學資管系 石若欣</br>長庚大學資管系 蔡宛儒</p>
									</div>
								</div>
							</form> -->
							<h3 class="intro">研究團隊介紹</h3>
							<p>我們的成員為醫師專家團隊、教師團隊及學生團隊所組成。</br>醫師團隊提供醫學影像及視訊檔案，並提供專業的醫療診斷建議，
								傳授教師及學生診斷超音波的心臟病種類，讓學生團隊能標記圖像並累積一定數量與醫師團隊做確認，
								由教師團隊針對欲解決之問題找出適當的訓練模型，並指導學生進行訓練及回報模型成果，最終將成果與網站結合，將結果呈現於網站上。</p>
							<table width="300" border="1">
								<tr>
									<td width=200><b>單位</b></td>
									<td width=200><b>成員</b></td>
									<td width=300><b></b></td>
								</tr>
								<tr>
									<td>臺北醫學大學</td>
									<td>謝凱生 醫生</td>
									<td>臨床40年小兒心臟診斷經驗</td>
								</tr>
								<tr>
									<td>高雄榮民總醫院</td>
									<td>翁根本 醫生</td>
									<td>兒童心臟內科主任</td>
								</tr>
								<tr>
									<td>高雄長庚醫院</td>
									<td>郭和昌 醫師</td>
									<td>川崎症中心主任</td>
								</tr>
								<tr>
									<td>中國醫學大學<br>附設醫院</td>
									<td>戴以信 醫生</td>
									<td>兒童心臟科主治醫生</td>
								</tr>								
								<tr>
									<td>淡江大學</br>資訊工程學系</td>
									<td>陳世興 副教授</td>
									<td>AI技術及Big Data 分析</td>
								</tr>
								<tr>
									<td>長庚大學</br>資訊管理學系</td>
									<td>陳宜惠 副教授</td>
									<td>AI技術及Big Data 分析</td>
								</tr>
								<tr>
									<td>長庚大學</br>資訊管理學系</td>
									<td>石若欣</br>
										陳畇巧</br>
										李玟儒</br>
										張如億</br>
										蔡宛儒</td>
									<td>資料標記、模型訓練、網站架設、網頁設計</td>
								</tr>
							</table>
							<h3 class="intro">IRB編號</h3>
							<p>本計畫通過高雄榮民總醫院IRB(標號：19-CT8-10(190701-2))</p>
							<h3 class="intro">聯絡資訊</h3>
							<p>xxxxx@gamil.com 最懂你的心團隊</p>
						</article>
						<!-- /關於我們 -->

						<!-- Elements -->
							<article id="elements">
								<h2 class="major">Elements</h2>

								<section>
									<h3 class="major">Text</h3>
									<p>This is <b>bold</b> and this is <strong>strong</strong>. This is <i>italic</i> and this is <em>emphasized</em>.
									This is <sup>superscript</sup> text and this is <sub>subscript</sub> text.
									This is <u>underlined</u> and this is code: <code>for (;;) { ... }</code>. Finally, <a href="#">this is a link</a>.</p>
									<hr />
									<h2>Heading Level 2</h2>
									<h3>Heading Level 3</h3>
									<h4>Heading Level 4</h4>
									<h5>Heading Level 5</h5>
									<h6>Heading Level 6</h6>
									<hr />
									<h4>Blockquote</h4>
									<blockquote>Fringilla nisl. Donec accumsan interdum nisi, quis tincidunt felis sagittis eget tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan faucibus. Vestibulum ante ipsum primis in faucibus lorem ipsum dolor sit amet nullam adipiscing eu felis.</blockquote>
									<h4>Preformatted</h4>
									<pre><code>i = 0;

while (!deck.isInOrder()) {
    print 'Iteration ' + i;
    deck.shuffle();
    i++;
}

print 'It took ' + i + ' iterations to sort the deck.';</code></pre>
								</section>

								<section>
									<h3 class="major">Lists</h3>

									<h4>Unordered</h4>
									<ul>
										<li>Dolor pulvinar etiam.</li>
										<li>Sagittis adipiscing.</li>
										<li>Felis enim feugiat.</li>
									</ul>

									<h4>Alternate</h4>
									<ul class="alt">
										<li>Dolor pulvinar etiam.</li>
										<li>Sagittis adipiscing.</li>
										<li>Felis enim feugiat.</li>
									</ul>

									<h4>Ordered</h4>
									<ol>
										<li>Dolor pulvinar etiam.</li>
										<li>Etiam vel felis viverra.</li>
										<li>Felis enim feugiat.</li>
										<li>Dolor pulvinar etiam.</li>
										<li>Etiam vel felis lorem.</li>
										<li>Felis enim et feugiat.</li>
									</ol>
									<h4>Icons</h4>
									<ul class="icons">
										<li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
										<li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
										<li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
										<li><a href="#" class="icon brands fa-github"><span class="label">Github</span></a></li>
									</ul>

									<h4>Actions</h4>
									<ul class="actions">
										<li><a href="#" class="button primary">Default</a></li>
										<li><a href="#" class="button">Default</a></li>
									</ul>
									<ul class="actions stacked">
										<li><a href="#" class="button primary">Default</a></li>
										<li><a href="#" class="button">Default</a></li>
									</ul>
								</section>

								<section>
									<h3 class="major">Table</h3>
									<h4>Default</h4>
									<div class="table-wrapper">
										<table>
											<thead>
												<tr>
													<th>Name</th>
													<th>Description</th>
													<th>Price</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>Item One</td>
													<td>Ante turpis integer aliquet porttitor.</td>
													<td>29.99</td>
												</tr>
												<tr>
													<td>Item Two</td>
													<td>Vis ac commodo adipiscing arcu aliquet.</td>
													<td>19.99</td>
												</tr>
												<tr>
													<td>Item Three</td>
													<td> Morbi faucibus arcu accumsan lorem.</td>
													<td>29.99</td>
												</tr>
												<tr>
													<td>Item Four</td>
													<td>Vitae integer tempus condimentum.</td>
													<td>19.99</td>
												</tr>
												<tr>
													<td>Item Five</td>
													<td>Ante turpis integer aliquet porttitor.</td>
													<td>29.99</td>
												</tr>
											</tbody>
											<tfoot>
												<tr>
													<td colspan="2"></td>
													<td>100.00</td>
												</tr>
											</tfoot>
										</table>
									</div>

									<h4>Alternate</h4>
									<div class="table-wrapper">
										<table class="alt">
											<thead>
												<tr>
													<th>Name</th>
													<th>Description</th>
													<th>Price</th>
												</tr>
											</thead>
											<tbody>
												<tr>
													<td>Item One</td>
													<td>Ante turpis integer aliquet porttitor.</td>
													<td>29.99</td>
												</tr>
												<tr>
													<td>Item Two</td>
													<td>Vis ac commodo adipiscing arcu aliquet.</td>
													<td>19.99</td>
												</tr>
												<tr>
													<td>Item Three</td>
													<td> Morbi faucibus arcu accumsan lorem.</td>
													<td>29.99</td>
												</tr>
												<tr>
													<td>Item Four</td>
													<td>Vitae integer tempus condimentum.</td>
													<td>19.99</td>
												</tr>
												<tr>
													<td>Item Five</td>
													<td>Ante turpis integer aliquet porttitor.</td>
													<td>29.99</td>
												</tr>
											</tbody>
											<tfoot>
												<tr>
													<td colspan="2"></td>
													<td>100.00</td>
												</tr>
											</tfoot>
										</table>
									</div>
								</section>

								<section>
									<h3 class="major">Buttons</h3>
									<ul class="actions">
										<li><a href="#" class="button primary">Primary</a></li>
										<li><a href="#" class="button">Default</a></li>
									</ul>
									<ul class="actions">
										<li><a href="#" class="button">Default</a></li>
										<li><a href="#" class="button small">Small</a></li>
									</ul>
									<ul class="actions">
										<li><a href="#" class="button primary icon solid fa-download">Icon</a></li>
										<li><a href="#" class="button icon solid fa-download">Icon</a></li>
									</ul>
									<ul class="actions">
										<li><span class="button primary disabled">Disabled</span></li>
										<li><span class="button disabled">Disabled</span></li>
									</ul>
								</section>

								<section>
									<h3 class="major">Form</h3>
									<form method="post" action="#">
										<div class="fields">
											<div class="field half">
												<label for="demo-name">Name</label>
												<input type="text" name="demo-name" id="demo-name" value="" placeholder="Jane Doe" />
											</div>
											<div class="field half">
												<label for="demo-email">Email</label>
												<input type="email" name="demo-email" id="demo-email" value="" placeholder="jane@untitled.tld" />
											</div>
											<div class="field">
												<label for="demo-category">Category</label>
												<select name="demo-category" id="demo-category">
													<option value="">-</option>
													<option value="1">Manufacturing</option>
													<option value="1">Shipping</option>
													<option value="1">Administration</option>
													<option value="1">Human Resources</option>
												</select>
											</div>
											<div class="field half">
												<input type="radio" id="demo-priority-low" name="demo-priority" checked>
												<label for="demo-priority-low">Low</label>
											</div>
											<div class="field half">
												<input type="radio" id="demo-priority-high" name="demo-priority">
												<label for="demo-priority-high">High</label>
											</div>
											<div class="field half">
												<input type="checkbox" id="demo-copy" name="demo-copy">
												<label for="demo-copy">Email me a copy</label>
											</div>
											<div class="field half">
												<input type="checkbox" id="demo-human" name="demo-human" checked>
												<label for="demo-human">Not a robot</label>
											</div>
											<div class="field">
												<label for="demo-message">Message</label>
												<textarea name="demo-message" id="demo-message" placeholder="Enter your message" rows="6"></textarea>
											</div>
										</div>
										<ul class="actions">
											<li><input type="submit" value="Send Message" class="primary" /></li>
											<li><input type="reset" value="Reset" /></li>
										</ul>
									</form>
								</section>

							</article>

					</div>

				<!-- Footer -->
					<footer id="footer">
						<p class="copyright">&copy; 最懂你的心. 2021 <a href="https://html5up.net"></a>.</p>
					</footer>

			</div>

		<!-- BG -->
			<div id="bg"></div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>
